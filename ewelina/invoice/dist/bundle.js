// jscs:disable
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var _templateObject=_taggedTemplateLiteral(["",""],["",""]);var _isomorphicFetch=require("isomorphic-fetch");var _isomorphicFetch2=_interopRequireDefault(_isomorphicFetch);var _hyperhtml=require("./lib/hyperhtml");var _hyperhtml2=_interopRequireDefault(_hyperhtml);var _chat=require("./controllers/chat");var _chat2=_interopRequireDefault(_chat);var _storage=require("./models/storage");var _storage2=_interopRequireDefault(_storage);var _header=require("./views/header");var _header2=_interopRequireDefault(_header);var _main=require("./views/main");var _main2=_interopRequireDefault(_main);var _footer=require("./views/footer");var _footer2=_interopRequireDefault(_footer);var _validate=require("validate.js");var _validate2=_interopRequireDefault(_validate);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}require("es6-promise").polyfill();window.Raven.config("https://4e05107f4af9435787096099c91fd9f5@sentry.io/98261").install();var endPoint="http://localhost:8010/dpreg-167318/us-central1/main";function getParameterByName(name,url){if(!url)url=window.location.href;name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return"";return decodeURIComponent(results[2].replace(/\+/g," "))}var appRender=_hyperhtml2.default.bind(document.querySelector(".app"));var main=_hyperhtml2.default.wire();_chat2.default.init(_storage2.default,function(chat){appRender(_templateObject,[(0,_main2.default)(main,chat)])});function validateNip(nip){var nip_bez_kresek=nip.replace(/-/g,"");var reg=/^[0-9]{10}$/;if(reg.test(nip_bez_kresek)==false){return false}else{var dig=(""+nip_bez_kresek).split("");var kontrola=(6*parseInt(dig[0])+5*parseInt(dig[1])+7*parseInt(dig[2])+2*parseInt(dig[3])+3*parseInt(dig[4])+4*parseInt(dig[5])+5*parseInt(dig[6])+6*parseInt(dig[7])+7*parseInt(dig[8]))%11;if(parseInt(dig[9])==kontrola)return true;else return false}}var topic_2313={topic:2313,messages:[{type:10,content:{label:"Podaj proszę Numer Identyfikacji Podatkowej (NIP) firmy na którą powinnam wystawić faktuę w polu ponżej..."}}],prompt:{type:20,name:"nip",validator:function validator(name,value){if(validateNip(value)){return false}else{return"ten numer NIP nie jest poprawny, spróbój jeszcze raz..."}}}};function collectPersonData(isCompanyQuestion){if(isCompanyQuestion.iscompany){_chat2.default.executeScript([topic_2313],getCompanyData)}else{_chat2.default.executeScript([{messages:[{type:10,content:{label:"Podaj proszę dane do faktury - imię, nazwisko i adres."}}],prompt:{type:20,name:"address",validator:function validator(name,value){if(_validate2.default.isString(value)){var result=_validate2.default.single(value,{presence:true,length:{minimum:6,tooShort:"Ten adres jest za krótki..."}});return result}return false}}}],function(answers){_chat2.default.executeScript([{messages:[{type:10,content:{label:"dane które umieścimy na fakturze:"}}]},{messages:[{type:10,content:{label:""+answers.address}}]},{messages:[{type:10,content:{label:"Czy te dane są poprawne?"}}],prompt:{type:10,choice:[{value:1,label:"Tak"},{value:0,label:"Nie"}],name:"correct",validator:function validator(name,value){return false}}}],function(isCorrectQuestion){if(!isCorrectQuestion.correct){collectPersonData({iscompany:false})}else{requestInvoice({address:answers.address,nip:"0000000000"})}})})}}_chat2.default.executeScript([{messages:[{type:10,content:{label:"Dziękujemy za płatność..."}}]},{messages:[{type:10,content:{label:"Czy faktura ma być wystawiona dla firmy czy osoby fizycznej?"}}],prompt:{type:10,choice:[{value:1,label:"Dla Firmy"},{value:0,label:"Dla Osoby Fizycznej"}],name:"iscompany"}}],collectPersonData);function prepareConfirmationScript(data){return[{messages:[{type:10,content:{label:"oto dane firmy które znalazłam na podstawie podanego NIP-u..."}}]},{messages:[{type:10,content:{label:data.getInvoiceData.name+",\n\t\t\t\t\t\t"+data.getInvoiceData.address+",\n\t\t\t\t\t\t"+data.getInvoiceData.zipCode+" "+data.getInvoiceData.locality+", \n\t\t\t\t\t\tREGON "+data.getInvoiceData.regon+"\n\t\t\t\t\t\t"}}]},{messages:[{type:10,content:{label:"Czy te dane są poprawne?"}}],prompt:{type:10,choice:[{value:1,label:"Tak"},{value:0,label:"Nie"}],name:"correct",validator:function validator(name,value){return false}}}]}function requestInvoice(data){var options={method:"POST",body:JSON.stringify({query:'\n\t\t\t\tmutation {\n\t\t\t\t\tRequestInvoice(invoiceForPayment: "'+getParameterByName("pid")+'", taxId: "'+data.nip+'"'+(data.address?', address: "'+data.address+'"':"")+") {\n\t\t\t\t\t\tid\n\t\t\t\t\t}\n\t\t\t\t}",variables:null})};return(0,_isomorphicFetch2.default)(endPoint,options).then(function(res){return res.json()}).then(function(json){_chat2.default.executeScript([{messages:[{type:10,content:{label:"Faktura wystawiona na te dane zostanie wysłana na adres email podany przy rejestracji."}},{type:10,content:{label:"Dziękuję, Miłego dnia."}}]}]);return json}).catch(function(err){_chat2.default.executeScript([{messages:[{type:10,content:{label:"Przepraszam ale moje narzędzia w tej chwili nie działają, proszę spróbować trochę później..."}}]}])})}window.getCompanyData=function(collectedData){var options={method:"POST",body:JSON.stringify({query:'\n\t\t\t{ \n\t\t\t\tgetInvoiceData(tid: "'+collectedData.nip+'") {\n\t\t\t\t\ttaxId\n\t\t\t\t\tregon\n\t\t\t\t\tname\n\t\t\t\t\tlocality\n\t\t\t\t\tzipCode\n\t\t\t\t\taddress\n\t\t\t\t}\n\t\t\t}',variables:null})};return(0,_isomorphicFetch2.default)(endPoint,options).then(function(res){return res.json()}).then(function(json){_chat2.default.executeScript(prepareConfirmationScript(json.data),function(collectedData){if(!collectedData.correct){_chat2.default.executeScript([topic_2313],getCompanyData)}else{requestInvoice(collectedData)}});return json}).catch(function(err){_chat2.default.executeScript([{messages:[{type:10,content:{label:"Przepraszam ale moje narzędzia w tej chwili nie działają, proszę spróbować trochę później..."}}]}])})};_chat2.default.update()},{"./controllers/chat":2,"./lib/hyperhtml":3,"./models/storage":5,"./views/footer":10,"./views/header":11,"./views/main":12,"es6-promise":16,"isomorphic-fetch":17,"validate.js":23}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _rifraf=require("rifraf");var _rifraf2=_interopRequireDefault(_rifraf);var _message=require("../models/message");var _message2=_interopRequireDefault(_message);var _scrollIntoView=require("scroll-into-view");var _scrollIntoView2=_interopRequireDefault(_scrollIntoView);var _validate=require("validate.js");var _validate2=_interopRequireDefault(_validate);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getRandomArbitrary(min,max){return Math.floor(Math.random()*(max-min))+min}var controller={ENTER_KEY:13,ESC_KEY:27,average_cpm:240,init:function init(storage,update){var _this=this;this.botName="Ewelina";this.botAvatar="https://dentalprocess.pl/static/706cabf3f9.png";this.userName="Ty";this.finalError='Doszliśmy do punktu w ktorym coś jest nie tak, prosimy o maila na <a href="mailto:kontakt@dentalprocess.pl" target="_blank">kontakt@dentalprocess.pl</a> z opisem problemu.';this.items=storage.get();this.question=false;this.answers={};this.update=function(){var chat=_this.items;update(_this)};window.onhashchange=this.update},sendMessage:function sendMessage(message,onDelivered,delayBy){var msg=(0,_message2.default)(message);controller.items.push(msg);var delivered=function delivered(){var _this2=this;_rifraf2.default.delay(function(){msg.viewed=true;if(onDelivered){_rifraf2.default.delay(function(){onDelivered();(0,_scrollIntoView2.default)(document.getElementById(msg.id))},_this2,window.deliveryDelay||1500)}else{(0,_scrollIntoView2.default)(document.getElementById(msg.id))}},this,2)};if(onDelivered&&"h"!==msg.actorType){var typeDelay=Math.min(window.typingTime||1250,Math.max(msg.content.label.length/controller.average_cpm*47.5*100,1250));_rifraf2.default.delay(function(){msg.delivered=true;controller.update();delivered()},undefined,typeDelay)}else{msg.delivered=true;delivered()}controller.update();if(message.transformTo){_rifraf2.default.delay(function(){controller.items[controller.items.length-1].transformTo=null;controller.update()},undefined,1)}},executeTopic:function executeTopic(execTopic){var topic=execTopic;if(topic.random){var randomMessage=execTopic.messages[getRandomArbitrary(0,topic.messages.length-1)];topic.messages=[randomMessage]}var again=function again(x){if(x<topic.messages.length){topic.messages[x].actor=controller.botName;topic.messages[x].avatar=controller.botAvatar;topic.messages[x].actorType="b";controller.sendMessage(topic.messages[x],function(){again(x+1)})}else{if(topic.prompt){controller.prompt=topic.prompt;controller.update()}else{controller.nextBranch()}}};again(0)},nextBranch:function nextBranch(){var topic=controller.script.shift();if(topic){controller.executeTopic(topic)}else{if(controller.scriptCallback)controller.scriptCallback(controller.answers)}},executeScript:function executeScript(script,cb){controller.script=script;controller.scriptCallback=cb;controller.nextBranch()},promptResponse:function promptResponse(resp){var validator=controller.prompt.validator||function(){return false};controller.prompt.retries=controller.prompt.retries||0;var validatorResponse=validator(controller.prompt.name,resp.value);if(!validatorResponse){ga("send","event","Registrations",controller.prompt.name,"Fall Campaign");controller.answers[controller.prompt.name]=resp.value;resp.actor=controller.userName;resp.actorType="h";controller.prompt=null;var lastEl=document.getElementById(controller.items[controller.items.length-1].id),lastElBounds=lastEl.getBoundingClientRect();resp.transformToX=resp.transformTo.right-lastElBounds.right+12;resp.transformToY=Math.abs(resp.transformTo.top-lastElBounds.bottom)-42;resp.delivered=true;controller.sendMessage(resp,function(){if(window.pauses){window.nextStep=controller.nextBranch.bind(this);return}controller.nextBranch()},250)}else{controller.prompt.retries=(controller.prompt.retries||0)+1;if(controller.prompt.retries>3){controller.sendMessage({type:10,actor:"!",content:{label:controller.finalError}})}else{controller.sendMessage({type:10,actor:controller.botName,content:{label:validatorResponse}})}}},setBotName:function setBotName(name){controller.botName=name},setUserName:function setUserName(name){controller.userName=name}};exports.default=controller},{"../models/message":4,rifraf:21,"scroll-into-view":22,"validate.js":23}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var hyperHTML=function(){"use strict";function hyperHTML(statics){return EXPANDO in this&&this[EXPANDO].s===statics?update.apply(this,arguments):upgrade.apply(this,arguments)}hyperHTML.wire=function wire(obj){return arguments.length<1?wireContent():wireWeakly(obj)};function attributesSeeker(node,actions){for(var attribute,value=IE?uid:uidc,attributes=slice.call(node.attributes),i=0,length=attributes.length;i<length;i++){attribute=attributes[i];if(attribute.value===value){actions.push(setAttribute(node,attribute))}}}function lukeTreeWalker(node,actions){for(var child,text,childNodes=slice.call(node.childNodes),length=childNodes.length,i=0;i<length;i++){child=childNodes[i];switch(child.nodeType){case 1:attributesSeeker(child,actions);lukeTreeWalker(child,actions);break;case 8:if(child.textContent===uid){if(length===1){actions.push(setAnyContent(node));node.removeChild(child)}else if((i<1||childNodes[i-1].nodeType===1)&&(i+1===length||childNodes[i+1].nodeType===1)){actions.push(setVirtualContent(child))}else{text=node.ownerDocument.createTextNode("");actions.push(setTextContent(text));node.replaceChild(text,child)}}break}}}function setAnyContent(node){return function any(value){switch(typeof value==="undefined"?"undefined":_typeof(value)){case"string":node.innerHTML=value;break;case"number":case"boolean":node.textContent=value;break;default:if(Array.isArray(value)){if(value.length===1){any(value[0])}else if(typeof value[0]==="string"){any(value.join(""))}else{var i=indexOfDiffereces(node.childNodes,value);if(-1<i){updateViaArray(node,value,i)}}}else{populateNode(node,value)}break}}}function setAttribute(node,attribute){var name=attribute.name,isSpecial=SPECIAL_ATTRIBUTE.test(name);if(isSpecial)node.removeAttribute(name);return isSpecial?function event(value){node[name]=value}:function attr(value){attribute.value=value}}function setVirtualContent(node){var fragment=document.createDocumentFragment(),childNodes=[];return function any(value){var i,parentNode=node.parentNode;switch(typeof value==="undefined"?"undefined":_typeof(value)){case"string":case"number":case"boolean":removeNodeList(childNodes,0);injectHTML(fragment,value);childNodes=slice.call(fragment.childNodes);parentNode.insertBefore(fragment,node);break;default:if(Array.isArray(value)){if(value.length===0){any(value[0])}else if(typeof value[0]==="string"){any(value.join(""))}else{i=indexOfDiffereces(childNodes,value);if(-1<i){removeNodeList(childNodes,i);value=value.slice(i);appendNodes(fragment,value);parentNode.insertBefore(fragment,node);childNodes.push.apply(childNodes,value)}}}else{removeNodeList(childNodes,0);childNodes=value.nodeType===11?slice.call(value.childNodes):[value];parentNode.insertBefore(value,node)}break}}}function setTextContent(node){return function text(value){node.textContent=value}}function appendNodes(node,childNodes){for(var i=0,length=childNodes.length;i<length;i++){node.appendChild(childNodes[i])}}function indexOfDiffereces(a,b){if(a===b)return-1;var i=0,aLength=a.length,bLength=b.length;while(i<aLength){if(i<bLength&&a[i]===b[i])i++;else return i}return i===bLength?-1:i}function injectHTML(fragment,html){var template=fragment.ownerDocument.createElement("template");template.innerHTML=html;appendNodes(fragment,slice.call((template.content||template).childNodes))}function populateNode(parent,child){switch(child.nodeType){case 1:var childNodes=parent.childNodes;if(childNodes.length!==1||childNodes[0]!==child){resetAndPopulate(parent,child)}break;case 11:if(-1<indexOfDiffereces(parent.childNodes,child.childNodes)){resetAndPopulate(parent,child)}break;case 3:parent.textContent=child.textContent;break}}function removeNodeList(list,startIndex){var length=list.length,child;while(startIndex<length--){child=list[length];child.parentNode.removeChild(child)}}function resetAndPopulate(parent,child){parent.textContent="";parent.appendChild(child)}function setupAndGetContent(node){for(var child,children=[],childNodes=node.childNodes,i=0,length=childNodes.length;i<length;i++){child=childNodes[i];if(1===child.nodeType||0<trim.call(child.textContent).length){children.push(child)}}length=children.length;return length<2?(child=length<1?node:children[0],function(){return child}):function(){return children}}function updateViaArray(node,childNodes,i){var fragment=node.ownerDocument.createDocumentFragment();if(0<i){removeNodeList(node.childNodes,i);appendNodes(fragment,childNodes.slice(i));node.appendChild(fragment)}else{appendNodes(fragment,childNodes);resetAndPopulate(node,fragment)}}function wireContent(){var content,fragment,render,setup,template;return function update(statics){if(template!==statics){setup=true;template=statics;fragment=document.createDocumentFragment();render=hyperHTML.bind(fragment)}render.apply(null,arguments);if(setup){setup=false;content=setupAndGetContent(fragment)}return content()}}function wireWeakly(obj){return wm.get(obj)||(wm.set(obj,wireContent()),wireWeakly(obj))}function update(statics){for(var i=1,length=arguments.length,updates=this[EXPANDO].u;i<length;i++){updates[i-1](arguments[i])}return this}function upgrade(statics){var updates=[],html=statics.join(uidc);if(IE)html=html.replace(no,comments);if(this.nodeType===1){this.innerHTML=html}else{injectHTML(this,html)}lukeTreeWalker(this,updates);this[EXPANDO]={s:statics,u:updates};return update.apply(this,arguments)}var SPECIAL_ATTRIBUTE=/^(?:on[a-z]+|async|autofocus|autoplay|capture|checked|controls|deferred|disabled|formnovalidate|loop|multiple|muted|required)$/,EXPANDO="_hyper_html: ",uid=EXPANDO+(Math.random()*new Date|0)+";",uidc="<!--"+uid+"-->",IE="documentMode"in document,no=IE&&new RegExp("([^\\S][a-z]+[a-z0-9_-]*=)(['\"])"+uidc+"\\2","g"),comments=IE&&"$1$2"+uid+"$2",trim=EXPANDO.trim||function(){return this.replace(/^\s+|\s+$/g,"")},slice=[].slice,wm=(typeof WeakMap==="undefined"?"undefined":_typeof(WeakMap))===(typeof wm==="undefined"?"undefined":_typeof(wm))?{get:function get(obj){return obj[EXPANDO]},set:function set(obj,value){Object.defineProperty(obj,EXPANDO,{configurable:true,value:value})}}:new WeakMap;hyperHTML.SPECIAL_ATTRIBUTE=SPECIAL_ATTRIBUTE;return hyperHTML}();exports.default=hyperHTML},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var idgen=function idgen(){var text="";var possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;i<8;i++){text+=possible.charAt(Math.floor(Math.random()*possible.length))}return text};exports.default=function(message){var delivered=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return{actor:message.actor,actorType:message.actorType,avatar:message.avatar,type:message.type,content:message.content,delivered:message.delivered,viewed:message.viewed,id:idgen(),createdAt:Date.now(),transformTo:message.transformTo,transformToX:message.transformToX,transformToY:message.transformToY}}},{}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var name="nerdbear";exports.default={get:function get(){return JSON.parse(localStorage.getItem(name)||"[]")},set:function set(value){return localStorage.setItem(name,JSON.stringify(value))}}},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(['\n\t\t\t<li id="','" class="','">','<div class="','" \n          style="','">',"</div></li>\n  "],['\n\t\t\t<li id="','" class="','">','<div class="','" \n          style="','">',"</div></li>\n  "]);var _hyperhtml=require("../lib/hyperhtml");var _hyperhtml2=_interopRequireDefault(_hyperhtml);var _bubbles=require("./bubbles");var _bubbles2=_interopRequireDefault(_bubbles);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var renders=0;exports.default=function(render,message,idx,chat){return render(_templateObject,message.id,"Pos(r) Px(1em) Py(0) M(0) "+(message.actorType==="h"?"Ta(end)":""),message.actor===(idx>0?chat[idx-1].actor:"")?"":(message.avatar?'<a target="_blank" href="http://twitter.com/nerdbear">\n            <img class="'+("Trs(atr) Bdrs(100%) Pos(a) H(34px) W(34px) T(26px) Start(0) Z(99)"+(message.delivered?"":" fading"))+'" src="'+message.avatar+'">\n        </a>':"")+'\n\t\t\t\t<a target="_blank" href="http://twitter.com/nerdbear" class="'+("Mt(16px) Mend(0) Mstart(36px) Mb(6px) Px(10px) Fz(.85em) D(b) C(#888888) O(1) Td(n) "+(message.delivered?"":"actorfade"))+'">\n            '+message.actor+"\n        </a>","Bxsh(bblsh) D(ib) Lh(1.45em) Bdrs(3px) M(0) Mstart(34px) Mb(.8em) Ta(s) Pos(r) Py(6px) Px(12px) Fz(19px) Bd(n) Maw(526px) Miw(28px) Mih(30px) Ov(h) bubble-anim"+(message.delivered?message.actorType==="h"?"":message.viewed?"":" bubble-transition":" bubble")+(message.actorType==="h"?" Bgc(#432d4a) C(#ffffff)":" Bgc(#ffffff)"),message.transformTo?"transform: translate("+message.transformToX+"px, "+message.transformToY+"px);":"transform: translate(0px,0px);",message.delivered?(0,_bubbles2.default)(render,message):'<p class="Fz(2em) P(0) M(0) typing"><span>.</span><span>.</span><span>.</span></p>')}},{"../lib/hyperhtml":3,"./bubbles":8}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var renders=0;exports.default=function(render,message){var animation=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return'<a class="'+("Td(n) Bdrs(3px) Pos(r) Lh(1.5em) Fz(0.75em) Bg(n) D(b) C(#8e8e8e)"+(animation?" -card-img":""))+'" target="_blank" href="'+message.content.targetUrl+'">\n    <img class="D(b) My(4px) Mx(0) Maw(100%) Mah(300px)" width='+message.content.dimensions.width+" height="+message.content.dimensions.height+' src="'+message.content.imageUrl+'">'+message.content.label+"\n   </a>"}},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _text=require("./text");var _text2=_interopRequireDefault(_text);var _card=require("./card");var _card2=_interopRequireDefault(_card);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var bubbletypes={10:_text2.default,20:_card2.default};exports.default=function(render,message,animate){var bubblefunc=bubbletypes[message.type];if(bubblefunc!==undefined){return bubblefunc(render,message,animate)}else{console.log("Upss, that shouldnt have happened..");return""}}},{"./card":7,"./text":9}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(render,message){return"<span>"+message.content.label+"</span>"}},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(['\n\t<footer class="footer" style="','">\n\t\t<span class="todo-count">\n\t\t\t<strong> '," </strong> item",' left\n\t\t</span>\n\t\t<ul class="filters">\n\t\t\t<li><a class="','" href="#/">All</a></li>\n\t\t\t<li><a class="','" href="#/active">Active</a></li>\n\t\t\t<li><a class="','" href="#/completed">Completed</a></li>\n\t\t</ul>\n\t\t<button\n\t\t\tclass="clear-completed"\n\t\t\tonclick="','"\n\t\t\tstyle="','"\n\t\t>Clear completed</button>\n\t</footer>'],['\n\t<footer class="footer" style="','">\n\t\t<span class="todo-count">\n\t\t\t<strong> '," </strong> item",' left\n\t\t</span>\n\t\t<ul class="filters">\n\t\t\t<li><a class="','" href="#/">All</a></li>\n\t\t\t<li><a class="','" href="#/active">Active</a></li>\n\t\t\t<li><a class="','" href="#/completed">Completed</a></li>\n\t\t</ul>\n\t\t<button\n\t\t\tclass="clear-completed"\n\t\t\tonclick="','"\n\t\t\tstyle="','"\n\t\t>Clear completed</button>\n\t</footer>']);var _chat=require("../controllers/chat");var _chat2=_interopRequireDefault(_chat);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var selected={true:"selected",false:""};exports.default=function(render,todos){var all=_chat2.default.todosSize();var left=_chat2.default.todosLeft();var hash=_chat2.default.hash();return render(_templateObject,all?"":"display:none",left,~-left?"s":"",selected[hash==="all"],selected[hash==="active"],selected[hash==="completed"],_chat2.default.clear,left<all?"":"display:none")}},{"../controllers/chat":2}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(['\n\t<header class="header">\n\t\t<h1>todos</h1>\n\t\t<input\n\t\t\tonkeypress="','"\n\t\t\tclass="new-todo"\n\t\t\tplaceholder="What needs to be done?"\n\t\t\tautofocus>\n\t</header>'],['\n\t<header class="header">\n\t\t<h1>todos</h1>\n\t\t<input\n\t\t\tonkeypress="','"\n\t\t\tclass="new-todo"\n\t\t\tplaceholder="What needs to be done?"\n\t\t\tautofocus>\n\t</header>']);var _chat=require("../controllers/chat");var _chat2=_interopRequireDefault(_chat);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}exports.default=function(render,todos){return render(_templateObject,_chat2.default.create)}},{"../controllers/chat":2}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(['\n\t<section class="main Pos(r) Bxz(bb) Maw(640px) Fz(0.8em) M(a) P(8px)">\n\t\t<ol class="List(n) P(0) Mx(0) Mt(0) Mb(148px)">','</ol>\n\t\t<div class="Ta(c) Pos(f) P(6px) M(0) B(0) Start(0) End(0)">',"</div>\n\t</section>"],['\n\t<section class="main Pos(r) Bxz(bb) Maw(640px) Fz(0.8em) M(a) P(8px)">\n\t\t<ol class="List(n) P(0) Mx(0) Mt(0) Mb(148px)">','</ol>\n\t\t<div class="Ta(c) Pos(f) P(6px) M(0) B(0) Start(0) End(0)">',"</div>\n\t</section>"]);var _hyperhtml=require("../lib/hyperhtml");var _hyperhtml2=_interopRequireDefault(_hyperhtml);var _bubble=require("./bubble.js");var _bubble2=_interopRequireDefault(_bubble);var _chat=require("../controllers/chat");var _chat2=_interopRequireDefault(_chat);var _prompts=require("./prompts");var _prompts2=_interopRequireDefault(_prompts);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}exports.default=function(render,chat){return render(_templateObject,chat.items.map(function(message,idx,arr){return(0,_bubble2.default)(_hyperhtml2.default.wire(message),message,idx,arr)}),chat.prompt?(0,_prompts2.default)(_hyperhtml2.default.wire(chat),chat.prompt):"")}},{"../controllers/chat":2,"../lib/hyperhtml":3,"./bubble.js":6,"./prompts":14}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(['<div onclick="','" class="Us(n) My(12px) Mx(6px) Fl(n) Cur(p) Bgc(#432d4a) C(#ffffff) Bxsh(bblsh) D(ib) Lh(1.45em) Bdrs(3px) Ta(s) Pos(r) Py(6px) Px(12px) Fz(19px) Bd(n) Maw(560px) Miw(44px) Mih(12px) input" style="','">\n    <span>',"</span>\n  </div>"],['<div onclick="','" class="Us(n) My(12px) Mx(6px) Fl(n) Cur(p) Bgc(#432d4a) C(#ffffff) Bxsh(bblsh) D(ib) Lh(1.45em) Bdrs(3px) Ta(s) Pos(r) Py(6px) Px(12px) Fz(19px) Bd(n) Maw(560px) Miw(44px) Mih(12px) input" style="','">\n    <span>',"</span>\n  </div>"]);var _hyperhtml=require("../../lib/hyperhtml");var _hyperhtml2=_interopRequireDefault(_hyperhtml);var _chat=require("../../controllers/chat");var _chat2=_interopRequireDefault(_chat);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}exports.default=function(render,prompt){return prompt.choice.map(function(choice,idx,arr){return _hyperhtml2.default.wire(choice)(_templateObject,clickfunc.bind(choice),"animation: slide-in "+(650+50*idx)/1e3+"s ease-in-out;",choice.label)})};function clickfunc(ev){var target=ev.target.tagName==="SPAN"?ev.target.parentElement:ev.target;var elemRect=target.getBoundingClientRect();_chat2.default.promptResponse({type:10,value:this.value,content:{label:this.label},transformTo:elemRect})}},{"../../controllers/chat":2,"../../lib/hyperhtml":3}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _choice=require("./choice");var _choice2=_interopRequireDefault(_choice);var _input=require("./input");var _input2=_interopRequireDefault(_input);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var prompttypes={10:_choice2.default,20:_input2.default};exports.default=function(render,prompt){var promptfunc=prompttypes[prompt.type];if(promptfunc!==undefined){return promptfunc(render,prompt)}else{console.log("Upss, that shouldnt have happened..");return""}}},{"./choice":13,"./input":15}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _templateObject=_taggedTemplateLiteral(['<div class="My(12px) Mx(6px) Cur(p) Fl(n) Bgc(#432d4a) C(#ffffff) Bxsh(bblsh) D(ib) Whs(nw) Lh(1.45em) Bdrs(3px) Ta(s) Pos(r) Py(6px) Px(12px) Fz(19px) Bd(n) Maw(526px) Miw(28px) Mih(12px) O(0)" \n        style="animation: slide-in 0.65s ease-in-out;"\n        style="transform: translate3d(0px, 0px, 0px);"\n        >\n          <div id="inel" class="D(ib) Maw(100%) Bdb(opsp5tw) Bd(n) Whs(n) Miw(1em) Maw(526px) Mih(1em) O(0) input_answer_placeholder"\n            contenteditable="true"\n            onfocus="','" \n            onkeypress="','"\n            onkeyup="','"\n          >\n            <span></span>\n          </div>\n        </div>\n        <div class="D(ib) Mah(19px) Maw(19px)">\n          <div class="Miw(26px) Pt(1px) Pstart(2px)" onclick="','">\n            <svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" style="display: block;">\n              <style>.st0{fill:#000000;}</style>\n                <g id="XMLID_2_">\n                  <path id="XMLID_4_" class="st0" d="M15.5 15.5l6.3 29.7L60.2 48l-38.4 2.8-6.3 29.7 65-32.5z"/>\n                </g>\n              </svg>\n            <div>    \n          </div>'],['<div class="My(12px) Mx(6px) Cur(p) Fl(n) Bgc(#432d4a) C(#ffffff) Bxsh(bblsh) D(ib) Whs(nw) Lh(1.45em) Bdrs(3px) Ta(s) Pos(r) Py(6px) Px(12px) Fz(19px) Bd(n) Maw(526px) Miw(28px) Mih(12px) O(0)" \n        style="animation: slide-in 0.65s ease-in-out;"\n        style="transform: translate3d(0px, 0px, 0px);"\n        >\n          <div id="inel" class="D(ib) Maw(100%) Bdb(opsp5tw) Bd(n) Whs(n) Miw(1em) Maw(526px) Mih(1em) O(0) input_answer_placeholder"\n            contenteditable="true"\n            onfocus="','" \n            onkeypress="','"\n            onkeyup="','"\n          >\n            <span></span>\n          </div>\n        </div>\n        <div class="D(ib) Mah(19px) Maw(19px)">\n          <div class="Miw(26px) Pt(1px) Pstart(2px)" onclick="','">\n            <svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 96 96" style="display: block;">\n              <style>.st0{fill:#000000;}</style>\n                <g id="XMLID_2_">\n                  <path id="XMLID_4_" class="st0" d="M15.5 15.5l6.3 29.7L60.2 48l-38.4 2.8-6.3 29.7 65-32.5z"/>\n                </g>\n              </svg>\n            <div>    \n          </div>']);var _chat=require("../../controllers/chat");var _chat2=_interopRequireDefault(_chat);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var inputValue="";exports.default=function(render,prompt){return render(_templateObject,focus2edit,handleEnter,updateValue,function(event){return sendResp()})};function focus2edit(event){this.spellcheck=false;this.classList.remove("input_answer_placeholder")}function handleEnter(event){if(event.keyCode===_chat2.default.ENTER_KEY){
event.preventDefault();sendResp()}}function sendResp(){var bodyRect=document.body.getBoundingClientRect(),element=document.getElementById("inel"),elemRect=element.getBoundingClientRect();element.textContent="";element.classList.add("input_answer_placeholder");_chat2.default.promptResponse({type:10,value:inputValue,content:{label:inputValue},transformTo:elemRect})}function updateValue(event){inputValue=event.target.textContent.trim()}},{"../../controllers/chat":2}],16:[function(require,module,exports){(function(process,global){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.ES6Promise=factory()})(this,function(){"use strict";function objectOrFunction(x){return typeof x==="function"||typeof x==="object"&&x!==null}function isFunction(x){return typeof x==="function"}var _isArray=undefined;if(!Array.isArray){_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}else{_isArray=Array.isArray}var isArray=_isArray;var len=0;var vertxNext=undefined;var customSchedulerFn=undefined;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2){if(customSchedulerFn){customSchedulerFn(flush)}else{scheduleFlush()}}};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow=typeof window!=="undefined"?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){if(typeof vertxNext!=="undefined"){return function(){vertxNext(flush)}}return useSetTimeout()}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined}len=0}function attemptVertx(){try{var r=require;var vertx=r("vertx");vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=undefined;if(isNode){scheduleFlush=useNextTick()}else if(BrowserMutationObserver){scheduleFlush=useMutationObserver()}else if(isWorker){scheduleFlush=useMessageChannel()}else if(browserWindow===undefined&&typeof require==="function"){scheduleFlush=attemptVertx()}else{scheduleFlush=useSetTimeout()}function then(onFulfillment,onRejection){var _arguments=arguments;var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined){makePromise(child)}var _state=parent._state;if(_state){(function(){var callback=_arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})})()}else{subscribe(parent,child,onFulfillment,onRejection)}return child}function resolve(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(noop);_resolve(promise,object);return promise}var PROMISE_ID=Math.random().toString(36).substring(16);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;var GET_THEN_ERROR=new ErrorObject;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){GET_THEN_ERROR.error=error;return GET_THEN_ERROR}}function tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then){asap(function(promise){var sealed=false;var error=tryThen(then,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){_resolve(promise,value)}else{fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;_reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;_reject(promise,error)}},promise)}function handleOwnThenable(promise,thenable){if(thenable._state===FULFILLED){fulfill(promise,thenable._result)}else if(thenable._state===REJECTED){_reject(promise,thenable._result)}else{subscribe(thenable,undefined,function(value){return _resolve(promise,value)},function(reason){return _reject(promise,reason)})}}function handleMaybeThenable(promise,maybeThenable,then$$){if(maybeThenable.constructor===promise.constructor&&then$$===then&&maybeThenable.constructor.resolve===resolve){handleOwnThenable(promise,maybeThenable)}else{if(then$$===GET_THEN_ERROR){_reject(promise,GET_THEN_ERROR.error);GET_THEN_ERROR.error=null}else if(then$$===undefined){fulfill(promise,maybeThenable)}else if(isFunction(then$$)){handleForeignThenable(promise,maybeThenable,then$$)}else{fulfill(promise,maybeThenable)}}}function _resolve(promise,value){if(promise===value){_reject(promise,selfFulfillment())}else if(objectOrFunction(value)){handleMaybeThenable(promise,value,getThen(value))}else{fulfill(promise,value)}}function publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}publish(promise)}function fulfill(promise,value){if(promise._state!==PENDING){return}promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0){asap(publish,promise)}}function _reject(promise,reason){if(promise._state!==PENDING){return}promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise)}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state){asap(publish,parent)}}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child=undefined,callback=undefined,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function ErrorObject(){this.error=null}var TRY_CATCH_ERROR=new ErrorObject;function tryCatch(callback,detail){try{return callback(detail)}catch(e){TRY_CATCH_ERROR.error=e;return TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=undefined,error=undefined,succeeded=undefined,failed=undefined;if(hasCallback){value=tryCatch(callback,detail);if(value===TRY_CATCH_ERROR){failed=true;error=value.error;value.error=null}else{succeeded=true}if(promise===value){_reject(promise,cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==PENDING){}else if(hasCallback&&succeeded){_resolve(promise,value)}else if(failed){_reject(promise,error)}else if(settled===FULFILLED){fulfill(promise,value)}else if(settled===REJECTED){_reject(promise,value)}}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){_resolve(promise,value)},function rejectPromise(reason){_reject(promise,reason)})}catch(e){_reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID]){makePromise(this.promise)}if(isArray(input)){this._input=input;this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){fulfill(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){fulfill(this.promise,this._result)}}}else{_reject(this.promise,validationError())}}function validationError(){return new Error("Array Methods must be provided an Array")}Enumerator.prototype._enumerate=function(){var length=this.length;var _input=this._input;for(var i=0;this._state===PENDING&&i<length;i++){this._eachEntry(_input[i],i)}};Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve$$=c.resolve;if(resolve$$===resolve){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING){this._settledAt(entry._state,i,entry._result)}else if(typeof _then!=="function"){this._remaining--;this._result[i]=entry}else if(c===Promise){var promise=new c(noop);handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i)}else{this._willSettleAt(new c(function(resolve$$){return resolve$$(entry)}),i)}}else{this._willSettleAt(resolve$$(entry),i)}};Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED){_reject(promise,value)}else{this._result[i]=value}}if(this._remaining===0){fulfill(promise,this._result)}};Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})};function all(entries){return new Enumerator(this,entries).promise}function race(entries){var Constructor=this;if(!isArray(entries)){return new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject)}})}}function reject(reason){var Constructor=this;var promise=new Constructor(noop);_reject(promise,reason);return promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Promise(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=="function"&&needsResolver();this instanceof Promise?initializePromise(this,resolver):needsNew()}}Promise.all=all;Promise.race=race;Promise.resolve=resolve;Promise.reject=reject;Promise._setScheduler=setScheduler;Promise._setAsap=setAsap;Promise._asap=asap;Promise.prototype={constructor:Promise,then:then,catch:function _catch(onRejection){return this.then(null,onRejection)}};function polyfill(){var local=undefined;if(typeof global!=="undefined"){local=global}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if(promiseToString==="[object Promise]"&&!P.cast){return}}local.Promise=Promise}Promise.polyfill=polyfill;Promise.Promise=Promise;return Promise})}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:19}],17:[function(require,module,exports){require("whatwg-fetch");module.exports=self.fetch.bind(self)},{"whatwg-fetch":24}],18:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;if(typeof performance!=="undefined"&&performance!==null&&performance.now){module.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){module.exports=function(){return(getNanoSeconds()-loadTime)/1e6};hrtime=process.hrtime;getNanoSeconds=function(){var hr;hr=hrtime();return hr[0]*1e9+hr[1]};loadTime=getNanoSeconds()}else if(Date.now){module.exports=function(){return Date.now()-loadTime};loadTime=Date.now()}else{module.exports=function(){return(new Date).getTime()-loadTime};loadTime=(new Date).getTime()}}).call(this)}).call(this,require("_process"))},{_process:19}],19:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],20:[function(require,module,exports){(function(global){var now=require("performance-now"),root=typeof window==="undefined"?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix];for(var i=0;!raf&&i<vendors.length;i++){raf=root[vendors[i]+"Request"+suffix];caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix]}if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(queue.length===0){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now;setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++){if(!cp[i].cancelled){try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(next))}queue.push({handle:++id,callback:callback,cancelled:false});return id};caf=function(handle){for(var i=0;i<queue.length;i++){if(queue[i].handle===handle){queue[i].cancelled=true}}}}module.exports=function(fn){return raf.call(root,fn)};module.exports.cancel=function(){caf.apply(root,arguments)};module.exports.polyfill=function(){root.requestAnimationFrame=raf;root.cancelAnimationFrame=caf}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"performance-now":18}],21:[function(require,module,exports){var request,cancel,root;var syncDelay=8;var isNative=true;function ctxDelayWrapper(func){return function(fn,_ctx,_delay){var ctx=_ctx;var delay=_delay;if(typeof _ctx==="number"&&typeof _delay==="undefined"){delay=_ctx;ctx=void 0}return func(fn,ctx,delay)}}function fakeRAF(fn,_delay){var delay=_delay!==void 0?_delay:syncDelay;return root.setTimeout(fn,delay)}if(!(request&&cancel)){root=function(){return this}();request=root.requestAnimationFrame||root.mozRequestAnimationFrame||root.webkitRequestAnimationFrame||fakeRAF;cancel=root.cancelAnimationFrame||root.mozCancelAnimationFrame||root.webkitCancelAnimationFrame||root.webkitCancelRequestAnimationFrame||root.clearTimeout;if(cancel===root.clearTimeout||request===fakeRAF){isNative=false;request=fakeRAF}}function iteratee(fn,ctx){return function _iteratee(){request(fn.apply.bind(fn,ctx||this,arguments))}}var delay=ctxDelayWrapper(function _delay(fn,ctx,_delay){if(typeof ctx==="object")fn=fn.bind(ctx);return fakeRAF(fn,_delay)});var iterateeFake=ctxDelayWrapper(function _iterateeFake(fn,ctx,_delay){return function _iterateeFake(){fakeRAF(fn.apply.bind(fn,ctx||this,arguments),_delay)}});function sync(_delay){return typeof _delay==="number"&&(syncDelay=_delay)}var later=ctxDelayWrapper(function _later(fn,ctx,_delay){return delay(iteratee(fn,ctx),_delay)});var latered=ctxDelayWrapper(function _latered(fn,ctx,_delay){return iterateeFake(iteratee(fn,ctx),_delay)});module.exports={isNative:isNative,request:function(fn,ctx){return request.call(root,arguments.length>1?fn.bind(ctx):fn)},iteratee:iteratee,deferred:iteratee,delay:isNative?later:delay,delayed:isNative?latered:iterateeFake,cancel:cancel.bind(root),sync120Hz:sync.bind(root,8),sync60Hz:sync.bind(root,16),sync30Hz:sync.bind(root,33),sync:sync}},{}],22:[function(require,module,exports){var raf=require("raf"),COMPLETE="complete",CANCELED="canceled";function setElementScroll(element,x,y){if(element===window){element.scrollTo(x,y)}else{element.scrollLeft=x;element.scrollTop=y}}function getTargetScrollLocation(target,parent,align){var targetPosition=target.getBoundingClientRect(),parentPosition,x,y,differenceX,differenceY,targetWidth,targetHeight,leftAlign=align&&align.left!=null?align.left:.5,topAlign=align&&align.top!=null?align.top:.5,leftOffset=align&&align.leftOffset!=null?align.leftOffset:0,topOffset=align&&align.topOffset!=null?align.topOffset:0,leftScalar=leftAlign,topScalar=topAlign;if(parent===window){targetWidth=Math.min(targetPosition.width,window.innerWidth);targetHeight=Math.min(targetPosition.height,window.innerHeight);x=targetPosition.left+window.pageXOffset-window.innerWidth*leftScalar+targetWidth*leftScalar;y=targetPosition.top+window.pageYOffset-window.innerHeight*topScalar+targetHeight*topScalar;x=Math.max(Math.min(x,document.body.scrollWidth-window.innerWidth*leftScalar),0);y=Math.max(Math.min(y,document.body.scrollHeight-window.innerHeight*topScalar),0);x-=leftOffset;y-=topOffset;differenceX=x-window.pageXOffset;differenceY=y-window.pageYOffset}else{targetWidth=targetPosition.width;targetHeight=targetPosition.height;parentPosition=parent.getBoundingClientRect();var offsetLeft=targetPosition.left-(parentPosition.left-parent.scrollLeft);var offsetTop=targetPosition.top-(parentPosition.top-parent.scrollTop);x=offsetLeft+targetWidth*leftScalar-parent.clientWidth*leftScalar;y=offsetTop+targetHeight*topScalar-parent.clientHeight*topScalar;x=Math.max(Math.min(x,parent.scrollWidth-parent.clientWidth),0);y=Math.max(Math.min(y,parent.scrollHeight-parent.clientHeight),0);x-=leftOffset;y-=topOffset;differenceX=x-parent.scrollLeft;differenceY=y-parent.scrollTop}return{x:x,y:y,differenceX:differenceX,differenceY:differenceY}}function animate(parent){raf(function(){var scrollSettings=parent._scrollSettings;if(!scrollSettings){return}var location=getTargetScrollLocation(scrollSettings.target,parent,scrollSettings.align),time=Date.now()-scrollSettings.startTime,timeValue=Math.min(1/scrollSettings.time*time,1);if(time>scrollSettings.time+20){setElementScroll(parent,location.x,location.y);parent._scrollSettings=null;return scrollSettings.end(COMPLETE)}var easeValue=1-scrollSettings.ease(timeValue);setElementScroll(parent,location.x-location.differenceX*easeValue,location.y-location.differenceY*easeValue);animate(parent)})}function transitionScrollTo(target,parent,settings,callback){var idle=!parent._scrollSettings,lastSettings=parent._scrollSettings,now=Date.now(),endHandler;if(lastSettings){lastSettings.end(CANCELED)}function end(endType){parent._scrollSettings=null;if(parent.parentElement&&parent.parentElement._scrollSettings){parent.parentElement._scrollSettings.end(endType)}callback(endType);parent.removeEventListener("touchstart",endHandler)}parent._scrollSettings={startTime:lastSettings?lastSettings.startTime:Date.now(),target:target,time:settings.time+(lastSettings?now-lastSettings.startTime:0),ease:settings.ease,align:settings.align,end:end};endHandler=end.bind(null,CANCELED);parent.addEventListener("touchstart",endHandler);if(idle){animate(parent)}}function isScrollable(element){return parent===window||(element.scrollHeight!==element.clientHeight||element.scrollWidth!==element.clientWidth)&&getComputedStyle(element).overflow!=="hidden"}function defaultValidTarget(){return true}module.exports=function(target,settings,callback){if(!target){return}if(typeof settings==="function"){callback=settings;settings=null}if(!settings){settings={}}settings.time=isNaN(settings.time)?1e3:settings.time;settings.ease=settings.ease||function(v){return 1-Math.pow(1-v,v/2)};var parent=target.parentElement,parents=0;function done(endType){parents--;if(!parents){callback&&callback(endType)}}var validTarget=settings.validTarget||defaultValidTarget;while(parent){if(validTarget(parent,parents)&&isScrollable(parent)){parents++;transitionScrollTo(target,parent,settings,done)}parent=parent.parentElement;if(!parent){return}if(parent.tagName==="BODY"){parent=window}}}},{raf:20}],23:[function(require,module,exports){(function(exports,module,define){"use strict";var validate=function(attributes,constraints,options){options=v.extend({},v.options,options);var results=v.runValidations(attributes,constraints,options),attr,validator;for(attr in results){for(validator in results[attr]){if(v.isPromise(results[attr][validator])){throw new Error("Use validate.async if you want support for promises")}}}return validate.processValidationResults(results,options)};var v=validate;v.extend=function(obj){[].slice.call(arguments,1).forEach(function(source){for(var attr in source){obj[attr]=source[attr]}});return obj};v.extend(validate,{version:{major:0,minor:11,patch:1,metadata:null,toString:function(){var version=v.format("%{major}.%{minor}.%{patch}",v.version);if(!v.isEmpty(v.version.metadata)){version+="+"+v.version.metadata}return version}},Promise:typeof Promise!=="undefined"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(attributes,constraints,options){var results=[],attr,validatorName,value,validators,validator,validatorOptions,error;if(v.isDomElement(attributes)||v.isJqueryElement(attributes)){attributes=v.collectFormValues(attributes)}for(attr in constraints){value=v.getDeepObjectValue(attributes,attr);validators=v.result(constraints[attr],value,attributes,attr,options,constraints);for(validatorName in validators){validator=v.validators[validatorName];if(!validator){error=v.format("Unknown validator %{name}",{name:validatorName});throw new Error(error)}validatorOptions=validators[validatorName];validatorOptions=v.result(validatorOptions,value,attributes,attr,options,constraints);if(!validatorOptions){continue}results.push({attribute:attr,value:value,validator:validatorName,globalOptions:options,attributes:attributes,options:validatorOptions,error:validator.call(validator,value,validatorOptions,attr,attributes,options)})}}return results},processValidationResults:function(errors,options){errors=v.pruneEmptyErrors(errors,options);errors=v.expandMultipleErrors(errors,options);errors=v.convertErrorMessages(errors,options);var format=options.format||"grouped";if(typeof v.formatters[format]==="function"){errors=v.formatters[format](errors)}else{throw new Error(v.format("Unknown format %{format}",options))}return v.isEmpty(errors)?undefined:errors},async:function(attributes,constraints,options){options=v.extend({},v.async.options,options);var WrapErrors=options.wrapErrors||function(errors){return errors};if(options.cleanAttributes!==false){attributes=v.cleanAttributes(attributes,constraints)}var results=v.runValidations(attributes,constraints,options);return new v.Promise(function(resolve,reject){v.waitForResults(results).then(function(){var errors=v.processValidationResults(results,options);if(errors){reject(new WrapErrors(errors,options,attributes,constraints))}else{resolve(attributes)}},function(err){reject(err)})})},single:function(value,constraints,options){options=v.extend({},v.single.options,options,{format:"flat",fullMessages:false});return v({single:value},{single:constraints},options)},waitForResults:function(results){return results.reduce(function(memo,result){if(!v.isPromise(result.error)){return memo}return memo.then(function(){return result.error.then(function(error){result.error=error||null})})},new v.Promise(function(r){r()}))},result:function(value){var args=[].slice.call(arguments,1);if(typeof value==="function"){value=value.apply(null,args)}return value},isNumber:function(value){return typeof value==="number"&&!isNaN(value)},isFunction:function(value){return typeof value==="function"},isInteger:function(value){return v.isNumber(value)&&value%1===0},isBoolean:function(value){return typeof value==="boolean"},isObject:function(obj){return obj===Object(obj)},isDate:function(obj){return obj instanceof Date},isDefined:function(obj){return obj!==null&&obj!==undefined},isPromise:function(p){return!!p&&v.isFunction(p.then)},isJqueryElement:function(o){return o&&v.isString(o.jquery)},isDomElement:function(o){if(!o){return false}if(!o.querySelectorAll||!o.querySelector){return false}if(v.isObject(document)&&o===document){return true}if(typeof HTMLElement==="object"){return o instanceof HTMLElement}else{return o&&typeof o==="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName==="string"}},isEmpty:function(value){var attr;if(!v.isDefined(value)){return true}if(v.isFunction(value)){return false}if(v.isString(value)){return v.EMPTY_STRING_REGEXP.test(value)}if(v.isArray(value)){return value.length===0}if(v.isDate(value)){return false}if(v.isObject(value)){for(attr in value){return false}return true}return false},format:v.extend(function(str,vals){if(!v.isString(str)){return str}return str.replace(v.format.FORMAT_REGEXP,function(m0,m1,m2){if(m1==="%"){return"%{"+m2+"}"}else{return String(vals[m2])}})},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(str){if(v.isNumber(str)){if(str*100%1===0){return""+str}else{return parseFloat(Math.round(str*100)/100).toFixed(2)}}if(v.isArray(str)){return str.map(function(s){return v.prettify(s)}).join(", ")}if(v.isObject(str)){return str.toString()}str=""+str;return str.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(m0,m1,m2){return""+m1+" "+m2.toLowerCase()}).toLowerCase()},stringifyValue:function(value){return v.prettify(value)},isString:function(value){return typeof value==="string"},isArray:function(value){return{}.toString.call(value)==="[object Array]"},isHash:function(value){return v.isObject(value)&&!v.isArray(value)&&!v.isFunction(value)},contains:function(obj,value){if(!v.isDefined(obj)){return false}if(v.isArray(obj)){return obj.indexOf(value)!==-1}return value in obj},unique:function(array){if(!v.isArray(array)){return array}return array.filter(function(el,index,array){return array.indexOf(el)==index})},forEachKeyInKeypath:function(object,keypath,callback){if(!v.isString(keypath)){return undefined}var key="",i,escape=false;for(i=0;i<keypath.length;++i){switch(keypath[i]){case".":if(escape){escape=false;key+="."}else{object=callback(object,key,false);key=""}break;case"\\":if(escape){escape=false;key+="\\"}else{escape=true}break;default:escape=false;key+=keypath[i];break}}return callback(object,key,true)},getDeepObjectValue:function(obj,keypath){if(!v.isObject(obj)){return undefined}return v.forEachKeyInKeypath(obj,keypath,function(obj,key){if(v.isObject(obj)){return obj[key]}})},collectFormValues:function(form,options){var values={},i,j,input,inputs,option,value;if(v.isJqueryElement(form)){form=form[0]}if(!form){return values}options=options||{};inputs=form.querySelectorAll("input[name], textarea[name]");for(i=0;i<inputs.length;++i){input=inputs.item(i);if(v.isDefined(input.getAttribute("data-ignored"))){continue}value=v.sanitizeFormValue(input.value,options);if(input.type==="number"){value=value?+value:null}else if(input.type==="checkbox"){if(input.attributes.value){if(!input.checked){value=values[input.name]||null}}else{value=input.checked}}else if(input.type==="radio"){if(!input.checked){value=values[input.name]||null}}values[input.name]=value}inputs=form.querySelectorAll("select[name]");for(i=0;i<inputs.length;++i){input=inputs.item(i);if(input.multiple){value=[];for(j in input.options){option=input.options[j];if(option.selected){value.push(v.sanitizeFormValue(option.value,options))}}}else{value=v.sanitizeFormValue(input.options[input.selectedIndex].value,options)}values[input.name]=value}return values},sanitizeFormValue:function(value,options){if(options.trim&&v.isString(value)){value=value.trim()}if(options.nullify!==false&&value===""){return null}return value},capitalize:function(str){if(!v.isString(str)){return str}return str[0].toUpperCase()+str.slice(1)},pruneEmptyErrors:function(errors){return errors.filter(function(error){return!v.isEmpty(error.error)})},expandMultipleErrors:function(errors){var ret=[];errors.forEach(function(error){if(v.isArray(error.error)){error.error.forEach(function(msg){ret.push(v.extend({},error,{error:msg}))})}else{ret.push(error)}});return ret},convertErrorMessages:function(errors,options){options=options||{};var ret=[];errors.forEach(function(errorInfo){var error=v.result(errorInfo.error,errorInfo.value,errorInfo.attribute,errorInfo.options,errorInfo.attributes,errorInfo.globalOptions);if(!v.isString(error)){ret.push(errorInfo);return}if(error[0]==="^"){error=error.slice(1)}else if(options.fullMessages!==false){error=v.capitalize(v.prettify(errorInfo.attribute))+" "+error}error=error.replace(/\\\^/g,"^");error=v.format(error,{value:v.stringifyValue(errorInfo.value)});ret.push(v.extend({},errorInfo,{error:error}))});return ret},groupErrorsByAttribute:function(errors){var ret={};errors.forEach(function(error){var list=ret[error.attribute];if(list){list.push(error)}else{ret[error.attribute]=[error]}});return ret},flattenErrorsToArray:function(errors){return errors.map(function(error){return error.error}).filter(function(value,index,self){return self.indexOf(value)===index})},
cleanAttributes:function(attributes,whitelist){function whitelistCreator(obj,key,last){if(v.isObject(obj[key])){return obj[key]}return obj[key]=last?true:{}}function buildObjectWhitelist(whitelist){var ow={},lastObject,attr;for(attr in whitelist){if(!whitelist[attr]){continue}v.forEachKeyInKeypath(ow,attr,whitelistCreator)}return ow}function cleanRecursive(attributes,whitelist){if(!v.isObject(attributes)){return attributes}var ret=v.extend({},attributes),w,attribute;for(attribute in attributes){w=whitelist[attribute];if(v.isObject(w)){ret[attribute]=cleanRecursive(ret[attribute],w)}else if(!w){delete ret[attribute]}}return ret}if(!v.isObject(whitelist)||!v.isObject(attributes)){return{}}whitelist=buildObjectWhitelist(whitelist);return cleanRecursive(attributes,whitelist)},exposeModule:function(validate,root,exports,module,define){if(exports){if(module&&module.exports){exports=module.exports=validate}exports.validate=validate}else{root.validate=validate;if(validate.isFunction(define)&&define.amd){define([],function(){return validate})}}},warn:function(msg){if(typeof console!=="undefined"&&console.warn){console.warn("[validate.js] "+msg)}},error:function(msg){if(typeof console!=="undefined"&&console.error){console.error("[validate.js] "+msg)}}});validate.validators={presence:function(value,options){options=v.extend({},this.options,options);if(options.allowEmpty?!v.isDefined(value):v.isEmpty(value)){return options.message||this.message||"can't be blank"}},length:function(value,options,attribute){if(!v.isDefined(value)){return}options=v.extend({},this.options,options);var is=options.is,maximum=options.maximum,minimum=options.minimum,tokenizer=options.tokenizer||function(val){return val},err,errors=[];value=tokenizer(value);var length=value.length;if(!v.isNumber(length)){v.error(v.format("Attribute %{attr} has a non numeric value for `length`",{attr:attribute}));return options.message||this.notValid||"has an incorrect length"}if(v.isNumber(is)&&length!==is){err=options.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)";errors.push(v.format(err,{count:is}))}if(v.isNumber(minimum)&&length<minimum){err=options.tooShort||this.tooShort||"is too short (minimum is %{count} characters)";errors.push(v.format(err,{count:minimum}))}if(v.isNumber(maximum)&&length>maximum){err=options.tooLong||this.tooLong||"is too long (maximum is %{count} characters)";errors.push(v.format(err,{count:maximum}))}if(errors.length>0){return options.message||errors}},numericality:function(value,options){if(!v.isDefined(value)){return}options=v.extend({},this.options,options);var errors=[],name,count,checks={greaterThan:function(v,c){return v>c},greaterThanOrEqualTo:function(v,c){return v>=c},equalTo:function(v,c){return v===c},lessThan:function(v,c){return v<c},lessThanOrEqualTo:function(v,c){return v<=c},divisibleBy:function(v,c){return v%c===0}};if(v.isString(value)&&options.strict){var pattern="^(0|[1-9]\\d*)";if(!options.onlyInteger){pattern+="(\\.\\d+)?"}pattern+="$";if(!new RegExp(pattern).test(value)){return options.message||options.notValid||this.notValid||this.message||"must be a valid number"}}if(options.noStrings!==true&&v.isString(value)&&!v.isEmpty(value)){value=+value}if(!v.isNumber(value)){return options.message||options.notValid||this.notValid||this.message||"is not a number"}if(options.onlyInteger&&!v.isInteger(value)){return options.message||options.notInteger||this.notInteger||this.message||"must be an integer"}for(name in checks){count=options[name];if(v.isNumber(count)&&!checks[name](value,count)){var key="not"+v.capitalize(name);var msg=options[key]||this[key]||this.message||"must be %{type} %{count}";errors.push(v.format(msg,{count:count,type:v.prettify(name)}))}}if(options.odd&&value%2!==1){errors.push(options.notOdd||this.notOdd||this.message||"must be odd")}if(options.even&&value%2!==0){errors.push(options.notEven||this.notEven||this.message||"must be even")}if(errors.length){return options.message||errors}},datetime:v.extend(function(value,options){if(!v.isFunction(this.parse)||!v.isFunction(this.format)){throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator")}if(!v.isDefined(value)){return}options=v.extend({},this.options,options);var err,errors=[],earliest=options.earliest?this.parse(options.earliest,options):NaN,latest=options.latest?this.parse(options.latest,options):NaN;value=this.parse(value,options);if(isNaN(value)||options.dateOnly&&value%864e5!==0){err=options.notValid||options.message||this.notValid||"must be a valid date";return v.format(err,{value:arguments[0]})}if(!isNaN(earliest)&&value<earliest){err=options.tooEarly||options.message||this.tooEarly||"must be no earlier than %{date}";err=v.format(err,{value:this.format(value,options),date:this.format(earliest,options)});errors.push(err)}if(!isNaN(latest)&&value>latest){err=options.tooLate||options.message||this.tooLate||"must be no later than %{date}";err=v.format(err,{date:this.format(latest,options),value:this.format(value,options)});errors.push(err)}if(errors.length){return v.unique(errors)}},{parse:null,format:null}),date:function(value,options){options=v.extend({},options,{dateOnly:true});return v.validators.datetime.call(v.validators.datetime,value,options)},format:function(value,options){if(v.isString(options)||options instanceof RegExp){options={pattern:options}}options=v.extend({},this.options,options);var message=options.message||this.message||"is invalid",pattern=options.pattern,match;if(!v.isDefined(value)){return}if(!v.isString(value)){return message}if(v.isString(pattern)){pattern=new RegExp(options.pattern,options.flags)}match=pattern.exec(value);if(!match||match[0].length!=value.length){return message}},inclusion:function(value,options){if(!v.isDefined(value)){return}if(v.isArray(options)){options={within:options}}options=v.extend({},this.options,options);if(v.contains(options.within,value)){return}var message=options.message||this.message||"^%{value} is not included in the list";return v.format(message,{value:value})},exclusion:function(value,options){if(!v.isDefined(value)){return}if(v.isArray(options)){options={within:options}}options=v.extend({},this.options,options);if(!v.contains(options.within,value)){return}var message=options.message||this.message||"^%{value} is restricted";return v.format(message,{value:value})},email:v.extend(function(value,options){options=v.extend({},this.options,options);var message=options.message||this.message||"is not a valid email";if(!v.isDefined(value)){return}if(!v.isString(value)){return message}if(!this.PATTERN.exec(value)){return message}},{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality:function(value,options,attribute,attributes){if(!v.isDefined(value)){return}if(v.isString(options)){options={attribute:options}}options=v.extend({},this.options,options);var message=options.message||this.message||"is not equal to %{attribute}";if(v.isEmpty(options.attribute)||!v.isString(options.attribute)){throw new Error("The attribute must be a non empty string")}var otherValue=v.getDeepObjectValue(attributes,options.attribute),comparator=options.comparator||function(v1,v2){return v1===v2};if(!comparator(value,otherValue,options,attribute,attributes)){return v.format(message,{attribute:v.prettify(options.attribute)})}},url:function(value,options){if(!v.isDefined(value)){return}options=v.extend({},this.options,options);var message=options.message||this.message||"is not a valid url",schemes=options.schemes||this.schemes||["http","https"],allowLocal=options.allowLocal||this.allowLocal||false;if(!v.isString(value)){return message}var regex="^"+"(?:(?:"+schemes.join("|")+")://)"+"(?:\\S+(?::\\S*)?@)?"+"(?:";var tld="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(allowLocal){tld+="?"}else{regex+="(?!(?:10|127)(?:\\.\\d{1,3}){3})"+"(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})"+"(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})"}regex+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])"+"(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}"+"(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))"+"|"+"(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)"+"(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+tld+")"+"(?::\\d{2,5})?"+"(?:[/?#]\\S*)?"+"$";var PATTERN=new RegExp(regex,"i");if(!PATTERN.exec(value)){return message}}};validate.formatters={detailed:function(errors){return errors},flat:v.flattenErrorsToArray,grouped:function(errors){var attr;errors=v.groupErrorsByAttribute(errors);for(attr in errors){errors[attr]=v.flattenErrorsToArray(errors[attr])}return errors},constraint:function(errors){var attr;errors=v.groupErrorsByAttribute(errors);for(attr in errors){errors[attr]=errors[attr].map(function(result){return result.validator}).sort()}return errors}};validate.exposeModule(validate,this,exports,module,define)}).call(this,typeof exports!=="undefined"?exports:null,typeof module!=="undefined"?module:null,typeof define!=="undefined"?define:null)},{}],24:[function(require,module,exports){(function(self){"use strict";if(self.fetch){return}var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(support.arrayBuffer){var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];var isDataView=function(obj){return obj&&DataView.prototype.isPrototypeOf(obj)};var isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1}}function normalizeName(name){if(typeof name!=="string"){name=String(name)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)){throw new TypeError("Invalid character in header field name")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!=="string"){value=String(value)}return value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(support.iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(Array.isArray(headers)){headers.forEach(function(header){this.append(header[0],header[1])},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var oldValue=this.map[name];this.map[name]=oldValue?oldValue+","+value:value};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){name=normalizeName(name);return this.has(name)?this.map[name]:null};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=normalizeValue(value)};Headers.prototype.forEach=function(callback,thisArg){for(var name in this.map){if(this.map.hasOwnProperty(name)){callback.call(thisArg,this.map[name],name,this)}}};Headers.prototype.keys=function(){var items=[];this.forEach(function(value,name){items.push(name)});return iteratorFor(items)};Headers.prototype.values=function(){var items=[];this.forEach(function(value){items.push(value)});return iteratorFor(items)};Headers.prototype.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value])});return iteratorFor(items)};if(support.iterable){Headers.prototype[Symbol.iterator]=Headers.prototype.entries}function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError("Already read"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsArrayBuffer(blob);return promise}function readBlobAsText(blob){var reader=new FileReader;var promise=fileReaderReady(reader);reader.readAsText(blob);return promise}function readArrayBufferAsText(buf){var view=new Uint8Array(buf);var chars=new Array(view.length);for(var i=0;i<view.length;i++){chars[i]=String.fromCharCode(view[i])}return chars.join("")}function bufferClone(buf){if(buf.slice){return buf.slice(0)}else{var view=new Uint8Array(buf.byteLength);view.set(new Uint8Array(buf));return view.buffer}}function Body(){this.bodyUsed=false;this._initBody=function(body){this._bodyInit=body;if(!body){this._bodyText=""}else if(typeof body==="string"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this._bodyText=body.toString()}else if(support.arrayBuffer&&support.blob&&isDataView(body)){this._bodyArrayBuffer=bufferClone(body.buffer);this._bodyInit=new Blob([this._bodyArrayBuffer])}else if(support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(body)||isArrayBufferView(body))){this._bodyArrayBuffer=bufferClone(body)}else{throw new Error("unsupported BodyInit type")}if(!this.headers.get("content-type")){if(typeof body==="string"){this.headers.set("content-type","text/plain;charset=UTF-8")}else if(this._bodyBlob&&this._bodyBlob.type){this.headers.set("content-type",this._bodyBlob.type)}else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)){this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")}}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(new Blob([this._bodyArrayBuffer]))}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){if(this._bodyArrayBuffer){return consumed(this)||Promise.resolve(this._bodyArrayBuffer)}else{return this.blob().then(readBlobAsArrayBuffer)}}}this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob)}else if(this._bodyArrayBuffer){return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}};if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(input instanceof Request){if(input.bodyUsed){throw new TypeError("Already read")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;if(!body&&input._bodyInit!=null){body=input._bodyInit;input.bodyUsed=true}}else{this.url=String(input)}this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(body)}Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})};function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function parseHeaders(rawHeaders){var headers=new Headers;rawHeaders.split(/\r?\n/).forEach(function(line){var parts=line.split(":");var key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}});return headers}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this.type="default";this.status="status"in options?options.status:200;this.ok=this.status>=200&&this.status<300;this.statusText="statusText"in options?options.statusText:"OK";this.headers=new Headers(options.headers);this.url=options.url||"";this._initBody(bodyInit)}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError("Invalid status code")}return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init);var xhr=new XMLHttpRequest;xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||"")};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.ontimeout=function(){reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);if(request.credentials==="include"){xhr.withCredentials=true}if("responseType"in xhr&&support.blob){xhr.responseType="blob"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send(typeof request._bodyInit==="undefined"?null:request._bodyInit)})};self.fetch.polyfill=true})(typeof self!=="undefined"?self:this)},{}]},{},[1]);
